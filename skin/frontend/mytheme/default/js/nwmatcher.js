/*
 * Copyright (C) 2007-2012 Diego Perini
 * All rights reserved.
 *
 * nwmatcher.js - A fast CSS selector engine and matcher
 *
 * Author: Diego Perini <diego.perini at gmail com>
 * Version: 1.3.0
 * Created: 20070722
 * Release: 20130110
 *
 * License:
 *  http://javascript.nwbox.com/NWMatcher/MIT-LICENSE
 * Download:
 *  http://javascript.nwbox.com/NWMatcher/nwmatcher.js
 */(function(e,t){if(typeof module=="object"&&typeof exports=="object")module.exports=function(e){var n={};t(e,n);return n};else{e.NW||(e.NW={});e.NW.Dom||(e.NW.Dom={});t(e,e.NW.Dom)}})(this,function(e,t){var n="nwmatcher-1.3.0",r=t,i=e.document,s=i.documentElement,o=[].slice,u={}.toString,a,f,l,c,h,p,d,v,m,g="[#.:]?",y="([~*^$|!]?={1})",b="[\\x20\\t\\n\\r\\f]*",w="[\\x20]|[>+~][^>+~]",E="(?:[-+]?\\d*n)?[-+]?\\d*",S="\"[^\"]*\"|'[^']*'",x="\\([^()]+\\)|\\(.*\\)",T="\\{[^{}]+\\}|\\{.*\\}",N="\\[[^[\\]]*\\]|\\[.*\\]",C="\\[.*\\]|\\(.*\\)|\\{.*\\}",k="(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)",L="(?:-?[_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)+",A="("+S+"|"+L+")",O=b+"("+k+"+:?"+k+"+)"+b+"(?:"+y+b+A+")?"+b,M=O.replace(A,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),_="((?:"+E+"|"+S+"|"+g+"|"+k+"+|"+"\\["+O+"\\]|"+"\\(.+\\)|"+b+"|"+",)+)",D=".+",P="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:"+g+L+")"+"|"+w+"|\\["+O+"\\]"+"|\\("+_+"\\)"+"|\\{"+D+"\\}"+"|(?:,|"+b+")"+")+",H=P.replace(_,".*"),B=new RegExp(P,"g"),j=new RegExp("^"+b+"|"+b+"$","g"),F=new RegExp("^((?!:not)("+g+"|"+L+"|\\([^()]*\\))+"+"|\\["+O+"\\]"+")$"),I=new RegExp("([^,\\\\()[\\]]+|"+N+"|"+x+"|"+T+"|\\\\."+")+","g"),q=new RegExp("(\\["+O+"\\]|"+"\\("+_+"\\)|"+"[^\\x20\\t\\r\\n\\f>+~]|\\\\.)+","g"),R=/[\x20\t\n\r\f]+/g,U=new RegExp(L+"|^$"),z=function(){var e=(i.appendChild+"").replace(/appendChild/g,"");return function(t,n){var r=t&&t[n]||!1;return r&&typeof r!="string"&&e==(r+"").replace(new RegExp(n,"g"),"")}}(),W=z(i,"hasFocus"),X=z(i,"querySelector"),V=z(i,"getElementById"),$=z(s,"getElementsByTagName"),J=z(s,"getElementsByClassName"),K=z(s,"getAttribute"),Q=z(s,"hasAttribute"),G=function(){var e=!1,t=s.id;s.id="length";try{e=!!o.call(i.childNodes,0)[0]}catch(n){}s.id=t;return e}(),Y="nextElementSibling"in s&&"previousElementSibling"in s,Z=V?function(){var e=!0,t="x"+String(+(new Date)),n=i.createElementNS?"a":'<a name="'+t+'">';(n=i.createElement(n)).name=t;s.insertBefore(n,s.firstChild);e=!!i.getElementById(t);s.removeChild(n);return e}():!0,et=$?function(){var e=i.createElement("div");e.appendChild(i.createComment(""));return!!e.getElementsByTagName("*")[0]}():!0,tt=J?function(){var e,t=i.createElement("div"),n="台北";t.appendChild(i.createElement("span")).setAttribute("class",n+"abc "+n);t.appendChild(i.createElement("span")).setAttribute("class","x");e=!t.getElementsByClassName(n)[0];t.lastChild.className=n;return e||t.getElementsByClassName(n).length!=2}():!0,nt=K?function(){var e=i.createElement("input");e.setAttribute("value",5);return e.defaultValue!=5}():!0,rt=Q?function(){var e=i.createElement("option");e.setAttribute("selected","selected");return!e.hasAttribute("selected")}():!0,it=function(){var e=i.createElement("select");e.appendChild(i.createElement("option"));return!e.firstChild.selected}(),st,ot,ut,at,ft=/opera/i.test(u.call(e.opera)),lt=ft&&parseFloat(opera.version())>=11,ct=X?function(){var e=[],t=i.createElement("div"),n,r=function(e,t,n,r){var i=!1;t.appendChild(n);try{i=t.querySelectorAll(e).length==r}catch(s){}while(t.firstChild)t.removeChild(t.firstChild);return i};n=i.createElement("p");n.setAttribute("class","");r('[class^=""]',t,n,1)&&e.push("[*^$]=[\\x20\\t\\n\\r\\f]*(?:\"\"|'')");n=i.createElement("option");n.setAttribute("selected","selected");r(":checked",t,n,0)&&e.push(":checked");n=i.createElement("input");n.setAttribute("type","hidden");r(":enabled",t,n,0)&&e.push(":enabled",":disabled");n=i.createElement("link");n.setAttribute("href","x");r(":link",t,n,1)||e.push(":link");rt&&e.push("\\[[\\x20\\t\\n\\r\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");return e.length?new RegExp(e.join("|")):{test:function(){return!1}}}():!0,ht=new RegExp("(?:\\[[\\x20\\t\\n\\r\\f]*class\\b|\\."+L+")"),pt=new RegExp(!et||!tt?ft?"^(?:\\*|#-?[_a-zA-Z]{1}"+k+"*)$":"^(?:\\*|[.#]?-?[_a-zA-Z]{1}"+k+"*)$":"^#?-?[_a-zA-Z]{1}"+k+"*$"),dt={a:1,A:1,area:1,AREA:1,link:1,LINK:1},vt={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},mt={value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"},gt={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},yt={"class":0,accept:1,"accept-charset":1,align:1,alink:1,axis:1,bgcolor:1,charset:1,checked:1,clear:1,codetype:1,color:1,compact:1,declare:1,defer:1,dir:1,direction:1,disabled:1,enctype:1,face:1,frame:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,method:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,rel:1,rev:1,rules:1,scope:1,scrolling:1,selected:1,shape:1,target:1,text:1,type:1,valign:1,valuetype:1,vlink:1},bt={accept:1,"accept-charset":1,alink:1,axis:1,bgcolor:1,charset:1,codetype:1,color:1,enctype:1,face:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,rel:1,rev:1,target:1,text:1,type:1,vlink:1},wt={},Et={"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"},St={ID:new RegExp("^\\*?#("+k+"+)|"+C),TAG:new RegExp("^("+k+"+)|"+C),CLASS:new RegExp("^\\*?\\.("+k+"+$)|"+C)},xt={spseudos:/^\:(root|empty|(?:first|last|only)(?:-child|-of-type)|nth(?:-last)?(?:-child|-of-type)\(\s*(even|odd|(?:[-+]{0,1}\d*n\s*)?[-+]{0,1}\s*\d*)\s*\))?(.*)/i,dpseudos:/^\:(link|visited|target|active|focus|hover|checked|disabled|enabled|selected|lang\(([-\w]{2,})\)|not\(([^()]*|.*)\))?(.*)/i,attribute:new RegExp("^\\["+M+"\\](.*)"),children:/^[\x20\t\n\r\f]*\>[\x20\t\n\r\f]*(.*)/,adjacent:/^[\x20\t\n\r\f]*\+[\x20\t\n\r\f]*(.*)/,relative:/^[\x20\t\n\r\f]*\~[\x20\t\n\r\f]*(.*)/,ancestor:/^[\x20\t\n\r\f]+(.*)/,universal:/^\*(.*)/,id:new RegExp("^#("+k+"+)(.*)"),tagName:new RegExp("^("+k+"+)(.*)"),className:new RegExp("^\\.("+k+"+)(.*)")},Tt=function(e,t){var n=-1,r;if(!e.length&&Array.slice)return Array.slice(t);while(r=t[++n])e[e.length]=r;return e},Nt=function(e,t,n){var r=-1,i;while(i=t[++r])if(!1===n(e[e.length]=i))break;return e},Ct=function(e,t){var n,o=i;c=e;i=e.ownerDocument||e;if(t||o!==i){s=i.documentElement;at=i.createElement("DiV").nodeName=="DiV";ut=!at&&typeof i.compatMode=="string"?i.compatMode.indexOf("CSS")<0:function(){var e=i.createElement("div").style;return e&&(e.width=1)&&e.width=="1px"}();n=i.createElement("div");n.appendChild(i.createElement("p")).setAttribute("class","xXx");n.appendChild(i.createElement("p")).setAttribute("class","xxx");st=!at&&J&&ut&&(n.getElementsByClassName("xxx").length!=2||n.getElementsByClassName("xXx").length!=2);ot=!at&&X&&ut&&(n.querySelectorAll("[class~=xxx]").length!=2||n.querySelectorAll(".xXx").length!=2);Vt.CACHING&&r.setCache(!0,i)}},kt=function(e,t){var n=-1,r=null;while(r=t[++n])if(r.getAttribute("id")==e)break;return r},Lt=Z?function(e,t){var n=null;e=e.replace(/\\([^\\]{1})/g,"$1");return at||t.nodeType!=9?kt(e,t.getElementsByTagName("*")):(n=t.getElementById(e))&&n.name==e&&t.getElementsByName?kt(e,t.getElementsByName(e)):n}:function(e,t){e=e.replace(/\\([^\\]{1})/g,"$1");return t.getElementById&&t.getElementById(e)||kt(e,t.getElementsByTagName("*"))},At=function(e,t){t||(t=i);c!==t&&Ct(t);return Lt(e,t)},Ot=function(e,t){var n=e=="*",r=t,i=[],s=r.firstChild;n||(e=e.toUpperCase());while(r=s){r.tagName>"@"&&(n||r.tagName.toUpperCase()==e)&&(i[i.length]=r);if(s=r.firstChild||r.nextSibling)continue;while(!s&&(r=r.parentNode)&&r!==t)s=r.nextSibling}return i},Mt=!et&&G?function(e,t){return at||t.nodeType==11?Ot(e,t):o.call(t.getElementsByTagName(e),0)}:function(e,t){var n=-1,r=n,i=[],s,o=t.getElementsByTagName(e);if(e=="*")while(s=o[++n])s.nodeName>"@"&&(i[++r]=s);else while(s=o[++n])i[n]=s;return i},_t=function(e,t){t||(t=i);c!==t&&Ct(t);return Mt(e,t)},Dt=function(e,t){return Zt('[name="'+e.replace(/\\([^\\]{1})/g,"$1")+'"]',t)},Pt=function(e,t){var n=-1,r=n,i=[],s,o=Mt("*",t),u;e=" "+(ut?e.toLowerCase():e).replace(/\\([^\\]{1})/g,"$1")+" ";while(s=o[++n]){u=at?s.getAttribute("class"):s.className;u&&u.length&&(" "+(ut?u.toLowerCase():u).replace(R," ")+" ").indexOf(e)>-1&&(i[++r]=s)}return i},Ht=function(e,t){return tt||st||at||!t.getElementsByClassName?Pt(e,t):o.call(t.getElementsByClassName(e.replace(/\\([^\\]{1})/g,"$1")),0)},Bt=function(e,t){t||(t=i);c!==t&&Ct(t);return Ht(e,t)},jt="compareDocumentPosition"in s?function(e,t){return(e.compareDocumentPosition(t)&16)==16}:"contains"in s?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},Ft=nt?function(e,t){t=t.toLowerCase();return typeof e[t]=="object"?e.attributes[t]&&e.attributes[t].value||"":t=="type"?e.getAttribute(t)||"":gt[t]?e.getAttribute(t,2)||"":vt[t]?e.getAttribute(t)?t:"false":(e=e.getAttributeNode(t))&&e.value||""}:function(e,t){return e.getAttribute(t)||""},It=rt?function(e,t){t=t.toLowerCase();if(mt[t])return!!e[mt[t]];e=e.getAttributeNode(t);return!!e&&!!e.specified}:function(e,t){return at?!!e.getAttribute(t):e.hasAttribute(t)},qt=function(e){e=e.firstChild;while(e){if(e.nodeType==3||e.nodeName>"@")return!1;e=e.nextSibling}return!0},Rt=function(e){return It(e,"href")&&dt[e.nodeName]},Ut=function(e,t){var n=1,r=t?"nextSibling":"previousSibling";while(e=e[r])e.nodeName>"@"&&++n;return n},zt=function(e,t){var n=1,r=t?"nextSibling":"previousSibling",i=e.nodeName;while(e=e[r])e.nodeName==i&&++n;return n},Wt=function(e){if(typeof e=="string")return Vt[e];if(typeof e!="object")return!1;for(var t in e){Vt[t]=!!e[t];if(t=="SIMPLENOT"){tn={};nn={};rn={};sn={};Vt.USE_QSAPI=!1}else t=="USE_QSAPI"&&(Vt[t]=!!e[t]&&X)}B=new RegExp(Vt.SIMPLENOT?P:H,"g");return!0},Xt=function(t){if(Vt.VERBOSITY)throw new Error(t);e.console&&e.console.log&&e.console.log(t)},Vt={CACHING:!1,SHORTCUTS:!1,SIMPLENOT:!0,UNIQUE_ID:!0,USE_HTML5:!0,USE_QSAPI:X,VERBOSITY:!0},$t="r[r.length]=c[k];if(f&&false===f(c[k]))break main;else continue main;",Jt=function(e,t,n){var r=typeof e=="string"?e.match(I):e;typeof t=="string"||(t="");if(r.length==1)t+=Qt(r[0],n?$t:"f&&f(k);return true;",n);else{var i=-1,s={},o;while(o=r[++i]){o=o.replace(j,"");!s[o]&&(s[o]=!0)&&(t+=Qt(o,n?$t:"f&&f(k);return true;",n))}}return n?new Function("c,s,r,d,h,g,f,v","var N,n,x=0,k=-1,e;main:while((e=c[++k])){"+t+"}return r;"):new Function("e,s,r,d,h,g,f,v","var N,n,x=0,k=e;"+t+"return false;")},Kt="var z=v[@]||(v[@]=[]),l=z.length-1;while(l>=0&&z[l]!==e)--l;if(l!==-1){break;}z[z.length]=e;",Qt=function(e,t,n){var r,s,o,u=0,a,f,l,c,h,p;while(e){u++;if(f=e.match(xt.universal))a="";else if(f=e.match(xt.id))t="if("+(at?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+f[1]+'"'+"){"+t+"}";else if(f=e.match(xt.tagName))t="if(e.nodeName"+(at?'=="'+f[1]+'"':'.toUpperCase()=="'+f[1].toUpperCase()+'"')+"){"+t+"}";else if(f=e.match(xt.className))t="if((n="+(at?'s.getAttribute(e,"class")':"e.className")+')&&n.length&&(" "+'+(ut?"n.toLowerCase()":"n")+".replace("+R+'," ")+" ").indexOf(" '+(ut?f[1].toLowerCase():f[1])+' ")>-1'+"){"+t+"}";else if(f=e.match(xt.attribute)){a=f[1].split(":");a=a.length==2?a[1]:a[0]+"";if(f[2]&&!Et[f[2]]){Xt('Unsupported operator in attribute selectors "'+e+'"');return""}h=!1;p="false";if(f[2]&&f[4]&&(p=Et[f[2]])){yt["class"]=ut?1:0;f[4]=f[4].replace(/(\x22|\x27)/g,"\\$1");f[4]=f[4].replace(/\\([0-9a-f]{2,2})/g,"\\x$1");h=(at?bt:yt)[a.toLowerCase()];p=p.replace(/\%m/g,h?f[4].toLowerCase():f[4])}else if(f[2]=="!="||f[2]=="="){f[4]=f[4].replace(/(\x22|\x27)/g,"\\$1");p="n"+f[2]+'="'+f[4]+'"'}a="n=s."+(f[2]?"get":"has")+'Attribute(e,"'+f[1]+'")'+(h?".toLowerCase();":";");t=a+"if("+(f[2]?p:"n")+"){"+t+"}"}else if(f=e.match(xt.adjacent)){t=(n?"":Kt.replace(/@/g,u))+t;t=Y?"var N"+u+"=e;while(e&&(e=e.previousElementSibling)){"+t+"break;}e=N"+u+";":"var N"+u+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+t+"break;}}e=N"+u+";"}else if(f=e.match(xt.relative)){t=(n?"":Kt.replace(/@/g,u))+t;t=Y?"var N"+u+"=e;e=e.parentNode.firstElementChild;"+"while(e&&e!==N"+u+"){"+t+"e=e.nextElementSibling;}e=N"+u+";":"var N"+u+"=e;e=e.parentNode.firstChild;"+"while(e&&e!==N"+u+'){if(e.nodeName>"@"){'+t+"}e=e.nextSibling;}e=N"+u+";"}else if(f=e.match(xt.children)){t=(n?"":Kt.replace(/@/g,u))+t;t="var N"+u+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+t+"break;}e=N"+u+";"}else if(f=e.match(xt.ancestor)){t=(n?"":Kt.replace(/@/g,u))+t;t="var N"+u+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+t+"}e=N"+u+";"}else if((f=e.match(xt.spseudos))&&f[1])switch(f[1]){case"root":f[3]?t="if(e===h||s.contains(h,e)){"+t+"}":t="if(e===h){"+t+"}";break;case"empty":t="if(s.isEmpty(e)){"+t+"}";break;default:if(f[1]&&f[2]){if(f[2]=="n"){t="if(e!==h){"+t+"}";break}if(f[2]=="even"){r=2;s=0}else if(f[2]=="odd"){r=2;s=1}else{s=(o=f[2].match(/(-?\d+)$/))?parseInt(o[1],10):0;r=(o=f[2].match(/(-?\d*)n/i))?parseInt(o[1],10):0;o&&o[1]=="-"&&(r=-1)}h=r>1?/last/i.test(f[1])?"(n-("+s+"))%"+r+"==0":"n>="+s+"&&(n-("+s+"))%"+r+"==0":r<-1?/last/i.test(f[1])?"(n-("+s+"))%"+r+"==0":"n<="+s+"&&(n-("+s+"))%"+r+"==0":r===0?"n=="+s:/last/i.test(f[1])?r==-1?"n>="+s:"n<="+s:r==-1?"n<="+s:"n>="+s;t="if(e!==h){n=s["+(/-of-type/i.test(f[1])?'"nthOfType"':'"nthElement"')+"]"+"(e,"+(/last/i.test(f[1])?"true":"false")+");"+"if("+h+"){"+t+"}"+"}"}else{r=/first/i.test(f[1])?"previous":"next";o=/only/i.test(f[1])?"previous":"next";s=/first|last/i.test(f[1]);p=/-of-type/i.test(f[1])?"&&n.nodeName!=e.nodeName":'&&n.nodeName<"@"';t="if(e!==h){"+("n=e;while((n=n."+r+"Sibling)"+p+");if(!n){"+(s?t:"n=e;while((n=n."+o+"Sibling)"+p+");if(!n){"+t+"}")+"}")+"}"}}else if((f=e.match(xt.dpseudos))&&f[1])switch(f[1].match(/^\w+/)[0]){case"not":a=f[3].replace(j,"");if(Vt.SIMPLENOT&&!F.test(a)){Xt('Negation pseudo-class only accepts simple selectors "'+e+'"');return""}"compatMode"in i?t="if(!"+Jt(a,"",!1)+"(e,s,r,d,h,g)){"+t+"}":t='if(!s.match(e, "'+a.replace(/\x22/g,'\\"')+'",g)){'+t+"}";break;case"checked":t='if((typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)'+(Vt.USE_HTML5?"||(/^option$/i.test(e.nodeName)&&(e.selected||e.checked))":"")+"){"+t+"}";break;case"disabled":t='if(((typeof e.form!=="undefined"'+(Vt.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===true){"+t+"}";break;case"enabled":t='if(((typeof e.form!=="undefined"'+(Vt.USE_HTML5?"":"&&!(/^hidden$/i).test(e.type)")+")||s.isLink(e))&&e.disabled===false){"+t+"}";break;case"lang":h="";f[2]&&(h=f[2].substr(0,2)+"-");t='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+f[2].toLowerCase()+'")||'+'(n&&(n=="'+f[2].toLowerCase()+'"||n.substr(0,3)=="'+h.toLowerCase()+'")))'+"{"+t+"break;}}while((e=e.parentNode)&&e!==g);";break;case"target":o=i.location?i.location.hash:"";o&&(t='if(e.id=="'+o.slice(1)+'"){'+t+"}");break;case"link":t="if(s.isLink(e)&&!e.visited){"+t+"}";break;case"visited":t="if(s.isLink(e)&&e.visited){"+t+"}";break;case"active":if(at)break;t="if(e===d.activeElement){"+t+"}";break;case"hover":if(at)break;t="if(e===d.hoverElement){"+t+"}";break;case"focus":if(at)break;t=W?"if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href||!isNaN(e.tabIndex))){"+t+"}":"if(e===d.activeElement&&(e.type||e.href)){"+t+"}";break;case"selected":a=it?"||(n=e.parentNode)&&n.options[n.selectedIndex]===e":"";t="if(/^option$/i.test(e.nodeName)&&(e.selected||e.checked"+a+")){"+t+"}";break;default:}else{a=!1;c=!1;for(a in wt)if((f=e.match(wt[a].Expression))&&f[1]){l=wt[a].Callback(f,t);t=l.source;c=l.status;if(c)break}if(!c){Xt('Unknown pseudo-class selector "'+e+'"');return""}if(!a){Xt('Unknown token in selector "'+e+'"');return""}}if(!f){Xt('Invalid syntax in selector "'+e+'"');return""}e=f&&f[f.length-1]}return t},Gt=function(e,t,n,r){var o;if(!(e&&e.nodeName>"@")){Xt("Invalid element argument");return!1}if(!t||typeof t!="string"){Xt("Invalid selector argument");return!1}if(n&&n.nodeType==1&&!jt(n,e))return!1;c!==n&&Ct(n||(n=e.ownerDocument));t=t.replace(j,"");Vt.SHORTCUTS&&(t=NW.Dom.shortcuts(t,e,n));if(p!=t){if(!(o=t.match(B))||o[0]!=t){Xt('The string "'+t+'", is not a valid CSS selector');return!1}a=(o=t.match(I)).length<2;p=t;v=o}else o=v;if(!nn[t]||tn[t]!==n){nn[t]=Jt(a?[t]:o,"",!1);tn[t]=n}return nn[t](e,on,[],i,s,n,r,{})},Yt=function(e,t){return Zt(e,t,function(){return!1})[0]||null},Zt=function(e,t,n){var u,a,p,v,g,y,b=e;if(arguments.length===0){Xt("Not enough arguments");return[]}if(typeof e!="string")return[];if(!/[>+~*\w\u00a1-\uffff]/.test(e)){Xt("Invalid or illegal selector string");return[]}if(t&&!/1|9|11/.test(t.nodeType)){Xt("Invalid or illegal context element");return[]}c!==t&&Ct(t||(t=i));if(Vt.CACHING&&(v=r.loadResults(b,t,i,s)))return n?Nt([],v,n):v;if(!lt&&pt.test(e))switch(e.charAt(0)){case"#":Vt.UNIQUE_ID&&(p=Lt(e.slice(1),t))?v=[p]:v=[];break;case".":v=Ht(e.slice(1),t);break;default:v=Mt(e,t)}else if(!at&&Vt.USE_QSAPI&&(!ot||!ht.test(e))&&!ct.test(e))try{v=t.querySelectorAll(e)}catch(w){}if(v){v=n?Nt([],v,n):G?o.call(v):Tt([],v);Vt.CACHING&&r.saveResults(b,t,i,v);return v}e=e.replace(j,"");Vt.SHORTCUTS&&(e=NW.Dom.shortcuts(e,t));if(a=d!=e){if(!(g=e.match(B))||g[0]!=e){Xt('The string "'+e+'", is not a valid CSS selector');return[]}f=(g=e.match(I)).length<2;d=e;m=g}else g=m;if(t.nodeType==11)v=t.childNodes;else if(!at&&f){if(a){g=e.match(q);y=g[g.length-1];l=y.split(":not")[0];h=e.length-y.length}if(Vt.UNIQUE_ID&&(g=l.match(St.ID))&&(y=g[1])){if(p=Lt(y,t))if(Gt(p,e)){n&&n(p);v=[p]}else v=[]}else if(Vt.UNIQUE_ID&&(g=e.match(St.ID))&&(y=g[1]))if(p=Lt(y,i))if("#"+y==e){n&&n(p);v=[p]}else/[>+~]/.test(e)?t=p.parentNode:t=p;else v=[];if(v){Vt.CACHING&&r.saveResults(b,t,i,v);return v}if(!J&&(g=l.match(St.TAG))&&(y=g[1])){if((v=Mt(y,t)).length===0)return[];e=e.slice(0,h)+e.slice(h).replace(y,"*")}else if((g=l.match(St.CLASS))&&(y=g[1])){if((v=Ht(y,t)).length===0)return[];U.test(e.charAt(e.indexOf(y)-1))?e=e.slice(0,h)+e.slice(h).replace("."+y,""):e=e.slice(0,h)+e.slice(h).replace("."+y,"*")}else if((g=e.match(St.CLASS))&&(y=g[1])){if((v=Ht(y,t)).length===0)return[];for(u=0,els=[];v.length>u;++u)els=Tt(els,v[u].getElementsByTagName("*"));v=els;U.test(e.charAt(e.indexOf(y)-1))?e=e.slice(0,h)+e.slice(h).replace("."+y,""):e=e.slice(0,h)+e.slice(h).replace("."+y,"*")}else if(J&&(g=l.match(St.TAG))&&(y=g[1])){if((v=Mt(y,t)).length===0)return[];e=e.slice(0,h)+e.slice(h).replace(y,"*")}}v||(v=/^(?:applet|object)$/i.test(t.nodeName)?t.childNodes:Mt("*",t));if(!sn[e]||rn[e]!==t){sn[e]=Jt(f?[e]:g,"",!0);rn[e]=t}v=sn[e](v,on,[],i,s,t,n,{});Vt.CACHING&&r.saveResults(b,t,i,v);return v},en=function(e){return e},tn={},nn={},rn={},sn={},on={nthElement:Ut,nthOfType:zt,getAttribute:Ft,hasAttribute:It,byClass:Ht,byName:Dt,byTag:Mt,byId:Lt,contains:jt,isEmpty:qt,isLink:Rt,select:Zt,match:Gt},un={prefixes:g,encoding:k,operators:y,whitespace:b,identifier:L,attributes:O,combinators:w,pseudoclass:_,pseudoparms:E,quotedvalue:S};r.ACCEPT_NODE=$t;r.emit=Xt;r.byId=At;r.byTag=_t;r.byName=Dt;r.byClass=Bt;r.getAttribute=Ft;r.hasAttribute=It;r.match=Gt;r.first=Yt;r.select=Zt;r.compile=Jt;r.contains=jt;r.configure=Wt;r.setCache=en;r.loadResults=en;r.saveResults=en;r.shortcuts=en;r.Config=Vt;r.Snapshot=on;r.Operators=Et;r.Selectors=wt;r.Tokens=un;r.registerOperator=function(e,t){Et[e]||(Et[e]=t)};r.registerSelector=function(e,t,n){wt[e]||(wt[e]={Expression:t,Callback:n})};Ct(i,!0)});